{% extends "base.html" %}
{% load static %}

{% block title %} Home Page | Deposum {% endblock %}

{% block links %}
<link rel="stylesheet" href="{% static '/styles/home.css' %}">
{% endblock %}

{% block content %}
<script src="{% static 'javascript/home.js' %}"></script>

<h1>Upload a PDF of your deposition to Deposum</h1>



<form id="form" method="POST" enctype="multipart/form-data" action="{% url 'summarize' %}">
    {% csrf_token %}
    {# ───── PDF chooser ───── #}
    <div class="mb-3">
        <label for="fileInput" class="form-label">Choose a PDF:</label>
        <input type="file" class="form-control" id="fileInput" name="file" accept="application/pdf" required>
    </div>
    {# ───── language selector ───── #}
    <div class="mb-3" id="lang">
        <div class="form-label d-block">Summary language:</div>

        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="lang" id="langEn"  value="en"  checked>
            <label class="form-check-label" for="langEn">English</label>
        </div>

        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="lang" id="langEs"  value="es">
            <label class="form-check-label" for="langEs">Spanish</label>
        </div>

        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="lang" id="langBoth" value="both">
            <label class="form-check-label" for="langBoth">Both</label>
        </div>
    </div>
    {# ───── keyword filter ───── #}
    <input type="radio" class="filter-type filter-disable" name="filterType" value="none" checked>No filter</input>
    <br/>   
    <input type="radio" class="filter-type" name="filterType" value="include">Only include:</input>
    <br/>
    <input type="radio" class="filter-type" name="filterType" value="exclude">Do not include:</input>
    <br/>
    <input type="text" class="filter-text" name="filterText" placeholder="Enter keyword, e.g. &quot;accident details&quot;" disabled>
    <br/>
    <div class="d-flex align-items-center gap-2 mt-2">
        <button type="button" class="btn btn-secondary" id="addFilter" onclick="addFilterKeyword()">Add filter</button>
        <button type="button" class="btn btn-secondary" id="removeFilter" onclick="removeFilterKeyword()" disabled>Remove filter</button>
    </div>
</form>

<div class="d-flex align-items-center gap-2 mt-2">
  <button form="form" class="btn btn-primary" id="btnClicked" onclick="if (validateForm()) document.getElementById('form').submit();">Summarize</button>
  {# Clear data form #}
  <form id="clearForm" method="POST" action="{% url 'clear' %}" class="m-0">
    {% csrf_token %}
    <button type="button" class="btn btn-warning clear-button" onclick="clearConfirm()">Clear data</button>
  </form>
</div>



{# loading spinner #}
<div id="loading" style="display:none; margin-top: 10px;">
    Processing…
    <img src="{% static '/images/gavel-judge.gif' %}" alt="Loading…" style="width:50px;height:50px;">
</div>

{# already-have-summary hint #}
<p class="output-url" hidden>
    It appears that you have already summarized a document —
    <a href="{% url 'output' %}">you can find the summary here.</a>
</p>
<script src="{% static 'javascript/home.js' %}"></script>
{% endblock %}
